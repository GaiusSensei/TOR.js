/*
The Old Reader JS Library v.0.0.1
https://github.com/GaiusSensei/TOR.js
(c) 2013 by gaiussensei@gmail.com

This is a JS Library that simplifies connections to https://github.com/krasnoukhov/theoldreader-api

*/
(function(b,h){b.ver="0.0.1";b.client="YourAppName";b.authToken="";var g="HOSTED_OR_GOOGLE",f="reader";b.init=function d(i,l,k,n){b.client=a(i);var m={client:b.client,accountType:g,service:f,Email:l,Passwd:k,output:"json"};b.get("accounts/ClientLogin",m,function j(o){if(o){b.authToken=o.Auth;n(true)}else{b.authToken="";n(false)}})};b.isLoggedIn=function e(){return(b.authToken!=="")};var a=function c(i){return i.replace(/^\s+|\s+$/g,"")}}(window.TOR=window.TOR||{}));(function(c,h){var f="https://theoldreader.com/reader/api/0/",b="Authorization",d="GoogleLogin auth=";c.ajax=function a(j,k,l,n,i){var m=new XMLHttpRequest();m.open(j,f+k,true);m.onreadystatechange=function(){if(this.readyState==XMLHttpRequest.DONE){if(this.status==="200"){if(n){n(JSON.parse(this.responseText))}}else{if(n){n({status:this.statusText})}}}};m.setRequestHeader("Accept","text/html,application/json;q=0.9,*/*;q=0.8");m.setRequestHeader("content-type","application/json");if(!i){m.setRequestHeader(b,d+c.authToken)}if(l){m.send(JSON.stringify(l))}else{m.send()}};c.get=function g(k,l,i,j){c.ajax("GET",k,l,j,i)};c.post=function e(k,l,i,j){c.ajax("POST",k,l,j,i)}}(window.TOR=window.TOR||{}));(function(b,g){var f={error:"Error: Not Logged In."};b.getToken=function e(h){if(b.authToken===""){h(f)}else{b.get("token",null,h)}};b.getUserInfo=function a(h){if(b.authToken===""){h(f)}else{b.get("user-info",{output:"json"},h)}};b.getPreferenceList=function d(h){if(b.authToken===""){h(f)}else{b.get("preference/list",{output:"json"},h)}};b.getFriendList=function c(h){if(b.authToken===""){h(f)}else{b.get("friend/list",{output:"json"},h)}}}(window.TOR=window.TOR||{}));